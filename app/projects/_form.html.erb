<div class="bg-nordik-bg min-h-screen py-12 px-6">
  <div class="max-w-5xl mx-auto">
    
    <div class="mb-12">
      <%= link_to projects_path, class: "group inline-flex items-center text-xs font-bold tracking-widest uppercase text-nordik-secondary hover:text-nordik-primary transition mb-4" do %>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
        </svg>
        Back to Projects
      <% end %>
      <h1 class="text-3xl font-sans tracking-[0.2em] text-nordik-primary uppercase">
        Create New Project
      </h1>
      <div class="h-0.5 w-12 bg-nordik-accent mt-4"></div>
    </div>

    <%= form_with(model: @project, class: "grid grid-cols-1 md:grid-cols-3 gap-8") do |f| %>

      <div class="md:col-span-2 bg-nordik-white p-8 md:p-10 rounded-2xl shadow-sm border border-nordik-accent/10">
        <h2 class="text-lg font-bold tracking-widest text-nordik-primary uppercase mb-8 flex items-center">
          <span class="bg-nordik-accent/20 w-8 h-8 rounded-full flex items-center justify-center text-nordik-accent mr-3">1</span>
          Project Details
        </h2>
        
        <div class="space-y-6">
          <div>
            <%= f.label :title, "Project Title", class: "block text-xs font-bold text-nordik-secondary uppercase tracking-widest mb-3" %>
            <%= f.text_field :title, placeholder: "E.g., Villa Sunrise", class: "w-full border-0 bg-nordik-bg/70 rounded-xl p-4 text-nordik-primary font-medium placeholder-nordik-secondary/50 focus:ring-2 focus:ring-nordik-accent transition shadow-inner" %>
          </div>

          <div>
            <%= f.label :description, "About the project", class: "block text-xs font-bold text-nordik-secondary uppercase tracking-widest mb-3" %>
            <%= f.text_area :description, rows: 6, placeholder: "Describe the architectural concept, materials used, and location...", class: "w-full border-0 bg-nordik-bg/70 rounded-xl p-4 text-nordik-primary font-medium placeholder-nordik-secondary/50 focus:ring-2 focus:ring-nordik-accent transition shadow-inner resize-none" %>
          </div>
        </div>
      </div>

      <div class="md:col-span-1 space-y-8">
        
        <div class="bg-nordik-white p-8 rounded-2xl shadow-sm border border-nordik-accent/10 h-full flex flex-col">
           <h2 class="text-lg font-bold tracking-widest text-nordik-primary uppercase mb-8 flex items-center">
            <span class="bg-nordik-accent/20 w-8 h-8 rounded-full flex items-center justify-center text-nordik-accent mr-3">2</span>
            Cover Image
          </h2>
          <div class="md:col-span-1 space-y-8">
        
        <div class="bg-nordik-white p-8 rounded-2xl shadow-sm border border-nordik-accent/10 h-64 flex flex-col">
           </div>

        <div class="bg-nordik-white p-8 rounded-2xl shadow-sm border border-nordik-accent/10">
          <h2 class="text-lg font-bold tracking-widest text-nordik-primary uppercase mb-6 flex items-center">
            <span class="bg-nordik-accent/20 w-8 h-8 rounded-full flex items-center justify-center text-nordik-accent mr-3">3</span>
            Gallery Photos
          </h2>

          <div class="relative">
            <%= f.label :photos, "Select multiple photos", class: "block text-xs font-bold text-nordik-secondary uppercase tracking-widest mb-2" %>
            
            <%= f.file_field :photos, multiple: true, class: "block w-full text-xs text-slate-500
              file:mr-4 file:py-2 file:px-4
              file:rounded-full file:border-0
              file:text-xs file:font-semibold
              file:bg-nordik-accent/10 file:text-nordik-primary
              hover:file:bg-nordik-accent/20 cursor-pointer
            " %>
            <p class="text-[10px] text-gray-400 mt-2">Hold 'Ctrl' or 'Cmd' to select multiple files.</p>
          </div>
        </div>

      </div>

          <div class="flex-grow relative group">
            <%= f.file_field :image, class: "absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10", onchange: "previewImage(this)" %>
            
            <div id="upload-placeholder" class="h-full border-2 border-dashed border-nordik-accent/30 rounded-xl bg-nordik-bg/30 flex flex-col items-center justify-center p-6 text-center group-hover:border-nordik-accent group-hover:bg-nordik-accent/10 transition-all duration-300">
              <div class="bg-white p-4 rounded-full shadow-sm mb-4 group-hover:scale-110 transition-transform">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-nordik-accent">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                </svg>
              </div>
              <p class="text-sm font-bold text-nordik-primary uppercase tracking-widest">Click to upload</p>
              <p class="text-xs text-nordik-secondary mt-2">JPG, PNG up to 5MB</p>
            </div>

            <img id="image-preview" class="hidden absolute inset-0 w-full h-full object-cover rounded-xl border-2 border-nordik-accent" />
          </div>
        </div>

      </div>
        
      <div class="md:col-span-3 flex justify-end mt-4">
        <%= f.submit "PUBLISH PROJECT", class: "cursor-pointer px-10 py-4 bg-nordik-accent text-white text-sm font-bold tracking-[0.2em] uppercase rounded-full hover:bg-nordik-primary hover:shadow-lg transform hover:-translate-y-1 transition-all duration-300" %>
      </div>

    <% end %>
  </div>
</div>

<script>
  function previewImage(input) {
    const placeholder = document.getElementById('upload-placeholder');
    const preview = document.getElementById('image-preview');
    
    if (input.files && input.files[0]) {
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result;
        preview.classList.remove('hidden');
        placeholder.classList.add('opacity-0'); // Esconde o placeholder
      }
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>